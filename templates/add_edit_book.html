<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Tienda de Libros</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(to right bottom, #edf2f7, #cbd5e0);
            min-height: 100vh;
        }
    </style>
</head>
<body class="font-sans leading-normal tracking-normal text-gray-800">
    <header class="bg-blue-700 text-white p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <a href="{{ url_for('main.index') }}" class="text-3xl font-extrabold tracking-wide">ðŸ“š Bookstore</a>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="{{ url_for('main.index') }}" class="hover:text-blue-200 transition duration-300">Inicio</a></li>
                    <li><a href="{{ url_for('main.add_book') }}" class="hover:text-blue-200 transition duration-300">AÃ±adir Libro</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container mx-auto p-8 mt-8 bg-white rounded-xl shadow-2xl max-w-lg">
        <h1 class="text-4xl font-extrabold text-center text-blue-800 mb-8">{{ title }}</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mb-6">
                    {% for category, message in messages %}
                        <div class="p-4 rounded-lg 
                            {% if category == 'success' %}bg-green-100 text-green-700{% endif %}
                            {% if category == 'error' %}bg-red-100 text-red-700{% endif %}
                            {% if category == 'info' %}bg-blue-100 text-blue-700{% endif %}
                            text-center font-medium mb-2">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="POST" class="space-y-6">
            <div>
                <label for="titulo" class="block text-gray-700 text-sm font-bold mb-2">TÃ­tulo:</label>
                <input type="text" id="titulo" name="titulo" value="{{ libro.titulo if libro else '' }}" required
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
                <label for="autor" class="block text-gray-700 text-sm font-bold mb-2">Autor:</label>
                <input type="text" id="autor" name="autor" value="{{ libro.autor if libro else '' }}" required
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
                <label for="genero" class="block text-gray-700 text-sm font-bold mb-2">GÃ©nero:</label>
                <input type="text" id="genero" name="genero" value="{{ libro.genero if libro else '' }}"
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
                <label for="precio" class="block text-gray-700 text-sm font-bold mb-2">Precio (S/.):</label>
                <input type="number" step="0.01" id="precio" name="precio" value="{{ "%.2f"|format(libro.precio) if libro else '' }}" required
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
                <label for="stock" class="block text-gray-700 text-sm font-bold mb-2">Stock:</label>
                <input type="number" id="stock" name="stock" value="{{ libro.stock if libro else '' }}" required
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
                <label for="imagen_url" class="block text-gray-700 text-sm font-bold mb-2">URL de la Imagen:</label>
                <input type="url" id="imagen_url" name="imagen_url" value="{{ libro.imagen_url if libro else '' }}"
                       class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"                       >
            </div>
            <div class="flex justify-between items-center">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-md">
                    {{ 'Guardar Cambios' if libro else 'AÃ±adir Libro' }}
                </button>
                <a href="{{ url_for('main.index') }}" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-md">
                    Cancelar
                </a>
            </div>
        </form>
    </div>

    <footer class="bg-gray-800 text-white p-6 mt-12 text-center shadow-inner">
        <div class="container mx-auto text-sm">
            &copy; 2025 Bookstore. Todos los derechos reservados.
        </div>
    </footer>
</body>
</html>